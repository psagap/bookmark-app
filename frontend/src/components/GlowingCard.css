/* ========================================
   GLOWING CARD - Theme-Aware Glow Effects
   Uses CSS variables from ThemeContext
   ======================================== */

:root {
    --glow-sens: 25;
    --color-sens: 40;
    /* Glow color is now set by theme - default fallback */
    --glow-color: var(--glow-color, 250deg 89% 67%);
    --glow-boost: 5%;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.glowing-card-wrapper {
    position: relative;
    isolation: isolate;
    border-radius: inherit;
    --pointer-deg: 45deg;
    --pointer-d: 0;
    animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.glowing-card-wrapper::before,
.glowing-card-wrapper::after,
.glowing-card-wrapper > .glow {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    transition: opacity 0.3s ease-out;
    z-index: -1;
    pointer-events: none;
}

/* Hide effects when not hovering */
.glowing-card-wrapper:not(:hover)::before,
.glowing-card-wrapper:not(:hover)::after,
.glowing-card-wrapper:not(:hover) > .glow {
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
}

/* Theme-aware gradient border */
.glowing-card-wrapper::before {
    border: 1px solid transparent;
    background:
        linear-gradient(hsl(var(--card)) 0 100%) padding-box,
        radial-gradient(at 0% 0%, hsl(var(--glow-color) / 0.8) 0px, transparent 50%) border-box,
        radial-gradient(at 100% 0%, hsl(var(--glow-secondary) / 0.6) 0px, transparent 50%) border-box,
        radial-gradient(at 100% 100%, hsl(var(--glow-color) / 0.7) 0px, transparent 50%) border-box,
        radial-gradient(at 0% 100%, hsl(var(--glow-secondary) / 0.5) 0px, transparent 50%) border-box;

    /* opacity increases as pointer gets near edge */
    opacity: calc((var(--pointer-d) - var(--color-sens)) / (100 - var(--color-sens)));

    /* border is masked to a cone, originating from the center towards the pointer */
    mask-image:
        conic-gradient(
            from var(--pointer-deg) at center,
            black 20%,
            transparent 35%,
            transparent 65%,
            black 80%
        );
}

/* Subtle gradient overlay */
.glowing-card-wrapper::after {
    border: 1px solid transparent;

    background:
        radial-gradient(at 0% 0%, hsl(var(--glow-color) / 0.08) 0px, transparent 50%),
        radial-gradient(at 100% 100%, hsl(var(--glow-secondary) / 0.08) 0px, transparent 50%);

    /* mask to create edge highlighting */
    mask-image:
        linear-gradient( to bottom, black, black ),
        radial-gradient( ellipse at 50% 50%, black 40%, transparent 65% ),
        radial-gradient( ellipse at 66% 66%, black 5%, transparent 40% ),
        radial-gradient( ellipse at 33% 33%, black 5%, transparent 40% ),
        radial-gradient( ellipse at 66% 33%, black 5%, transparent 40% ),
        radial-gradient( ellipse at 33% 66%, black 5%, transparent 40% ),
        conic-gradient( from var(--pointer-deg) at center, transparent 5%, black 15%, black 85%, transparent 95% );

    -webkit-mask-composite: xor;
    mask-composite: exclude;

    /* opacity increases as pointer gets near edge */
    opacity: calc((var(--pointer-d) - var(--color-sens)) / (100 - var(--color-sens)));
    mix-blend-mode: soft-light;
}

/* Glowing border edges - theme aware */
.glowing-card-wrapper > .glow {
    /* outer padding so the glow can overflow */
    inset: -20px;
    pointer-events: none;
    z-index: 1;

    /* glow is masked to a cone, originating from the center towards the pointer */
    mask-image:
        conic-gradient(
            from var(--pointer-deg) at center,
            black 2.5%,
            transparent 10%,
            transparent 90%,
            black 97.5%
        );

    /* opacity increases as pointer gets near edge, adjusted by theme intensity */
    opacity: calc(((var(--pointer-d) - var(--glow-sens)) / (100 - var(--glow-sens))) * var(--glow-intensity, 1));
    mix-blend-mode: plus-lighter;
}

.glowing-card-wrapper > .glow::before {
    content: "";
    position: absolute;
    inset: 20px;
    border-radius: inherit;
    /* Theme-aware glow using CSS variables with RGB values */
    box-shadow:
        inset 0 0 0 1px rgba(var(--glow-color-rgb), 1),

        inset 0 0 1px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.6)),
        inset 0 0 3px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.5)),
        inset 0 0 6px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.4)),
        inset 0 0 15px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.3)),
        inset 0 0 25px 2px rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.2)),
        inset 0 0 50px 2px rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.1)),

        0 0 1px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.6)),
        0 0 3px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.5)),
        0 0 6px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.4)),
        0 0 15px 0 rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.3)),
        0 0 25px 2px rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.2)),
        0 0 50px 2px rgba(var(--glow-color-rgb), calc(var(--glow-boost) + 0.1));
}

/* ========================================
   Theme-specific glow variations
   These classes can be applied for different effects
   ======================================== */

/* Dual-color glow for themes with contrasting accents */
.glowing-card-wrapper.glow-dual > .glow::before {
    box-shadow:
        inset 0 0 0 1px rgba(var(--glow-color-rgb), 0.8),
        inset 0 0 20px 0 rgba(var(--glow-color-rgb), 0.3),
        inset 0 0 40px 0 rgba(var(--glow-secondary-rgb), 0.2),
        0 0 20px 0 rgba(var(--glow-color-rgb), 0.3),
        0 0 40px 0 rgba(var(--glow-secondary-rgb), 0.2);
}

/* Intense glow for neon themes like Synthwave */
.glowing-card-wrapper.glow-neon > .glow::before {
    box-shadow:
        inset 0 0 0 2px rgba(var(--glow-color-rgb), 1),
        inset 0 0 5px 0 rgba(var(--glow-color-rgb), 0.8),
        inset 0 0 15px 0 rgba(var(--glow-color-rgb), 0.6),
        inset 0 0 30px 0 rgba(var(--glow-color-rgb), 0.4),
        inset 0 0 60px 5px rgba(var(--glow-color-rgb), 0.2),
        0 0 5px 0 rgba(var(--glow-color-rgb), 0.8),
        0 0 15px 0 rgba(var(--glow-color-rgb), 0.6),
        0 0 30px 0 rgba(var(--glow-color-rgb), 0.4),
        0 0 60px 5px rgba(var(--glow-color-rgb), 0.2);
}

/* Subtle glow for minimal themes */
.glowing-card-wrapper.glow-subtle > .glow::before {
    box-shadow:
        inset 0 0 0 1px rgba(var(--glow-color-rgb), 0.5),
        inset 0 0 10px 0 rgba(var(--glow-color-rgb), 0.15),
        inset 0 0 25px 0 rgba(var(--glow-color-rgb), 0.08),
        0 0 10px 0 rgba(var(--glow-color-rgb), 0.15),
        0 0 25px 0 rgba(var(--glow-color-rgb), 0.08);
}

/* Warm glow for earthy themes */
.glowing-card-wrapper.glow-warm > .glow::before {
    box-shadow:
        inset 0 0 0 1px rgba(var(--glow-color-rgb), 0.7),
        inset 0 0 8px 0 rgba(var(--glow-color-rgb), 0.4),
        inset 0 0 20px 0 rgba(var(--glow-secondary-rgb), 0.25),
        inset 0 0 40px 2px rgba(var(--glow-color-rgb), 0.15),
        0 0 8px 0 rgba(var(--glow-color-rgb), 0.4),
        0 0 20px 0 rgba(var(--glow-secondary-rgb), 0.25),
        0 0 40px 2px rgba(var(--glow-color-rgb), 0.15);
}
